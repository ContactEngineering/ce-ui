// =============================================================================
// Material Design 3 Theme for TopoBank
// =============================================================================

// Font Awesome icons
@import "@fortawesome/fontawesome-free/css/all.min.css";

// -----------------------------------------------------------------------------
// MD3 Color System
// Using Quasar's default primary (#1976D2) as seed color
// -----------------------------------------------------------------------------

:root {
  // Primary colors
  --md-sys-color-primary: #1976D2;
  --md-sys-color-on-primary: #FFFFFF;
  --md-sys-color-primary-container: #D1E4FF;
  --md-sys-color-on-primary-container: #001D36;

  // Secondary colors
  --md-sys-color-secondary: #535F70;
  --md-sys-color-on-secondary: #FFFFFF;
  --md-sys-color-secondary-container: #D7E3F7;
  --md-sys-color-on-secondary-container: #101C2B;

  // Tertiary colors
  --md-sys-color-tertiary: #6B5778;
  --md-sys-color-on-tertiary: #FFFFFF;
  --md-sys-color-tertiary-container: #F2DAFF;
  --md-sys-color-on-tertiary-container: #251431;

  // Error colors
  --md-sys-color-error: #BA1A1A;
  --md-sys-color-on-error: #FFFFFF;
  --md-sys-color-error-container: #FFDAD6;
  --md-sys-color-on-error-container: #410002;

  // Surface colors
  --md-sys-color-surface: #FDFCFF;
  --md-sys-color-on-surface: #1A1C1E;
  --md-sys-color-surface-variant: #DFE2EB;
  --md-sys-color-on-surface-variant: #43474E;
  --md-sys-color-surface-container: #EEEEF2;
  --md-sys-color-surface-container-low: #F3F3F7;
  --md-sys-color-surface-container-high: #E8E8EC;

  // Outline colors
  --md-sys-color-outline: #73777F;
  --md-sys-color-outline-variant: #C3C7CF;

  // Background
  --md-sys-color-background: #FDFCFF;
  --md-sys-color-on-background: #1A1C1E;

  // Inverse colors
  --md-sys-color-inverse-surface: #2F3033;
  --md-sys-color-inverse-on-surface: #F1F0F4;
  --md-sys-color-inverse-primary: #A0CAFD;

  // MD3 Shape (more rounded corners)
  --md-sys-shape-corner-none: 0px;
  --md-sys-shape-corner-extra-small: 4px;
  --md-sys-shape-corner-small: 8px;
  --md-sys-shape-corner-medium: 12px;
  --md-sys-shape-corner-large: 16px;
  --md-sys-shape-corner-extra-large: 28px;
  --md-sys-shape-corner-full: 9999px;

  // MD3 Elevation (using shadows)
  --md-sys-elevation-level0: none;
  --md-sys-elevation-level1: 0 1px 2px rgba(0,0,0,0.3), 0 1px 3px 1px rgba(0,0,0,0.15);
  --md-sys-elevation-level2: 0 1px 2px rgba(0,0,0,0.3), 0 2px 6px 2px rgba(0,0,0,0.15);
  --md-sys-elevation-level3: 0 1px 3px rgba(0,0,0,0.3), 0 4px 8px 3px rgba(0,0,0,0.15);
  --md-sys-elevation-level4: 0 2px 3px rgba(0,0,0,0.3), 0 6px 10px 4px rgba(0,0,0,0.15);
  --md-sys-elevation-level5: 0 4px 4px rgba(0,0,0,0.3), 0 8px 12px 6px rgba(0,0,0,0.15);

  // Typography
  --md-sys-typescale-body-large-size: 16px;
  --md-sys-typescale-body-medium-size: 14px;
  --md-sys-typescale-body-small-size: 12px;
  --md-sys-typescale-label-large-size: 14px;
  --md-sys-typescale-title-large-size: 22px;
  --md-sys-typescale-title-medium-size: 16px;
  --md-sys-typescale-headline-small-size: 24px;
  --md-sys-typescale-headline-medium-size: 28px;
  --md-sys-typescale-headline-large-size: 32px;
}

// -----------------------------------------------------------------------------
// Base Styles
// -----------------------------------------------------------------------------

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  font-size: var(--md-sys-typescale-body-large-size);
  color: var(--md-sys-color-on-background);
  background-color: var(--md-sys-color-background);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  padding-top: 64px; // Space for fixed app bar
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

// -----------------------------------------------------------------------------
// Quasar Component Overrides for MD3
// -----------------------------------------------------------------------------

// Cards with MD3 styling
.q-card {
  border-radius: var(--md-sys-shape-corner-medium) !important;
  box-shadow: var(--md-sys-elevation-level1) !important;
  background-color: var(--md-sys-color-surface) !important;

  &:hover {
    box-shadow: var(--md-sys-elevation-level2) !important;
  }
}

// Buttons with MD3 pill shape
.q-btn {
  border-radius: var(--md-sys-shape-corner-full) !important;
  text-transform: none !important;
  font-weight: 500 !important;
  letter-spacing: 0.1px !important;
}

// Filled buttons
.q-btn--filled {
  box-shadow: none !important;

  &:hover {
    box-shadow: var(--md-sys-elevation-level1) !important;
  }
}

// Outlined buttons
.q-btn--outline {
  border-width: 1px !important;
}

// Text/flat buttons
.q-btn--flat {
  &:hover {
    background-color: rgba(var(--md-sys-color-primary), 0.08) !important;
  }
}

// Input fields with MD3 styling
.q-field--outlined .q-field__control {
  border-radius: var(--md-sys-shape-corner-extra-small) !important;
}

.q-field--filled .q-field__control {
  border-radius: var(--md-sys-shape-corner-extra-small) var(--md-sys-shape-corner-extra-small) 0 0 !important;
}

// Dialogs with MD3 styling
.q-dialog__inner--minimized > div {
  border-radius: var(--md-sys-shape-corner-extra-large) !important;
}

// Chips with MD3 styling
.q-chip {
  border-radius: var(--md-sys-shape-corner-small) !important;
}

// Tabs with MD3 styling
.q-tabs {
  .q-tab {
    border-radius: var(--md-sys-shape-corner-full) !important;
    text-transform: none !important;
  }
}

// Expansion items
.q-expansion-item {
  border-radius: var(--md-sys-shape-corner-small) !important;
}

// Banners with MD3 styling
.q-banner {
  border-radius: var(--md-sys-shape-corner-medium) !important;
}

// -----------------------------------------------------------------------------
// Layout Components
// -----------------------------------------------------------------------------

// Main content wrapper
#wrapper {
  display: flex;
  flex: 1 0 auto;
}

#wrapper #content-wrapper {
  overflow-x: hidden;
  width: 100%;
  padding: 24px;
  padding-bottom: 80px;
}

// Container with max-width
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 16px;
}

// -----------------------------------------------------------------------------
// Deep Zoom Image Viewer
// -----------------------------------------------------------------------------

.dzi-container {
  display: flex;
  align-items: stretch;
  flex-direction: row;
  border-radius: var(--md-sys-shape-corner-medium);
  overflow: hidden;
}

.dzi-view {
  flex: 1;
  aspect-ratio: 4 / 3;
  background-color: var(--md-sys-color-surface-container);
}

.dzi-colorbar {
  width: 6rem;
  margin-left: 16px;
  display: flex;
  flex-direction: column;
}

.dzi-colorbar-column {
  width: 20px;
  height: 300px;
  position: relative;
  border-radius: var(--md-sys-shape-corner-extra-small);
}

.background-viridis {
  background: linear-gradient(to top, #440154, #48186a, #472d7b, #424086, #3b528b, #33638d, #2c728e, #26818e, #21908c, #1f9f88, #28ae80, #3ebc74, #5dc963, #82d34c, #abdc32, #d5e21a, #fde725);
}

.dzi-colorbar-tick {
  background: var(--md-sys-color-on-surface);
  height: 1px;
  width: 5px;
  right: 0;
  position: absolute;
  transform: translateY(-50%);
}

.dzi-colorbar-text {
  font-size: var(--md-sys-typescale-body-small-size);
  color: var(--md-sys-color-on-surface-variant);
  position: absolute;
  transform: translateY(-50%);
  margin-left: 8px;
}

.dzi-colorbar-title {
  font-size: var(--md-sys-typescale-label-large-size);
  font-weight: 500;
  color: var(--md-sys-color-on-surface);
  margin-bottom: 8px;
}

// -----------------------------------------------------------------------------
// Drop Zone
// -----------------------------------------------------------------------------

.drop-zone {
  border: 2px dashed var(--md-sys-color-outline);
  border-radius: var(--md-sys-shape-corner-large);
  width: 100%;
  padding: 48px 24px;
  text-align: center;
  background-color: var(--md-sys-color-surface-container-low);
  transition: all 0.2s ease;

  &:hover {
    border-color: var(--md-sys-color-primary);
    background-color: var(--md-sys-color-primary-container);
  }
}

.drop-zone-active {
  border-color: var(--md-sys-color-primary);
  background-color: var(--md-sys-color-primary-container);
}

// -----------------------------------------------------------------------------
// Typography Helpers
// -----------------------------------------------------------------------------

.text-headline-large {
  font-size: var(--md-sys-typescale-headline-large-size);
  font-weight: 400;
  line-height: 1.25;
}

.text-headline-medium {
  font-size: var(--md-sys-typescale-headline-medium-size);
  font-weight: 400;
  line-height: 1.29;
}

.text-headline-small {
  font-size: var(--md-sys-typescale-headline-small-size);
  font-weight: 400;
  line-height: 1.33;
}

.text-title-large {
  font-size: var(--md-sys-typescale-title-large-size);
  font-weight: 400;
  line-height: 1.27;
}

.text-title-medium {
  font-size: var(--md-sys-typescale-title-medium-size);
  font-weight: 500;
  line-height: 1.5;
  letter-spacing: 0.15px;
}

.text-body-large {
  font-size: var(--md-sys-typescale-body-large-size);
  font-weight: 400;
  line-height: 1.5;
  letter-spacing: 0.5px;
}

.text-body-medium {
  font-size: var(--md-sys-typescale-body-medium-size);
  font-weight: 400;
  line-height: 1.43;
  letter-spacing: 0.25px;
}

.text-body-small {
  font-size: var(--md-sys-typescale-body-small-size);
  font-weight: 400;
  line-height: 1.33;
  letter-spacing: 0.4px;
}

.text-label-large {
  font-size: var(--md-sys-typescale-label-large-size);
  font-weight: 500;
  line-height: 1.43;
  letter-spacing: 0.1px;
}

// -----------------------------------------------------------------------------
// Color Helpers
// -----------------------------------------------------------------------------

.surface {
  background-color: var(--md-sys-color-surface);
  color: var(--md-sys-color-on-surface);
}

.surface-variant {
  background-color: var(--md-sys-color-surface-variant);
  color: var(--md-sys-color-on-surface-variant);
}

.surface-container {
  background-color: var(--md-sys-color-surface-container);
  color: var(--md-sys-color-on-surface);
}

.primary-container {
  background-color: var(--md-sys-color-primary-container);
  color: var(--md-sys-color-on-primary-container);
}

.secondary-container {
  background-color: var(--md-sys-color-secondary-container);
  color: var(--md-sys-color-on-secondary-container);
}

.tertiary-container {
  background-color: var(--md-sys-color-tertiary-container);
  color: var(--md-sys-color-on-tertiary-container);
}

.error-container {
  background-color: var(--md-sys-color-error-container);
  color: var(--md-sys-color-on-error-container);
}

// -----------------------------------------------------------------------------
// Elevation Helpers
// -----------------------------------------------------------------------------

.elevation-0 { box-shadow: var(--md-sys-elevation-level0); }
.elevation-1 { box-shadow: var(--md-sys-elevation-level1); }
.elevation-2 { box-shadow: var(--md-sys-elevation-level2); }
.elevation-3 { box-shadow: var(--md-sys-elevation-level3); }
.elevation-4 { box-shadow: var(--md-sys-elevation-level4); }
.elevation-5 { box-shadow: var(--md-sys-elevation-level5); }

// -----------------------------------------------------------------------------
// Shape Helpers
// -----------------------------------------------------------------------------

.rounded-none { border-radius: var(--md-sys-shape-corner-none) !important; }
.rounded-xs { border-radius: var(--md-sys-shape-corner-extra-small) !important; }
.rounded-sm { border-radius: var(--md-sys-shape-corner-small) !important; }
.rounded-md { border-radius: var(--md-sys-shape-corner-medium) !important; }
.rounded-lg { border-radius: var(--md-sys-shape-corner-large) !important; }
.rounded-xl { border-radius: var(--md-sys-shape-corner-extra-large) !important; }
.rounded-full { border-radius: var(--md-sys-shape-corner-full) !important; }

// -----------------------------------------------------------------------------
// Utility Classes
// -----------------------------------------------------------------------------

// Remove number input spinners
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

// Ellipsis text overflow
.text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Sticky footer
footer.sticky-footer {
  margin-top: auto;
  padding: 24px;
  background-color: var(--md-sys-color-surface-container);

  .copyright {
    font-size: var(--md-sys-typescale-body-small-size);
    color: var(--md-sys-color-on-surface-variant);
  }
}

// -----------------------------------------------------------------------------
// Animations
// -----------------------------------------------------------------------------

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-up {
  from { transform: translateY(16px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out;
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}
